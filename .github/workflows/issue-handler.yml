name: auto-issue-handler

on:
  issues:
    types: [opened]
  issue_comment:
    types: [created]

jobs:
  handle-issue-multi-model:
    runs-on: ubuntu-latest
    permissions:
      contents: write
      issues: write
      pull-requests: write
    strategy:
      matrix:
        model:
          - name: "Dolphin Mistral"
            id: "cognitivecomputations/dolphin-mistral-24b-venice-edition:free"
          - name: "DeepSeek R1"
            id: "deepseek/deepseek-r1-0528:free"
          - name: "Trinity Large"
            id: "arcee-ai/trinity-large-preview:free"
          - name: "Solar Pro 3"
            id: "upstage/solar-pro-3:free"
      fail-fast: false
    steps:
      - uses: actions/checkout@v4
      
      - name: Analyze and Fix Issue with ${{ matrix.model.name }}
        uses: opencodeco/opencode-action@v1
        with:
          openrouter_api_key: ${{ secrets.OPENROUTER_API_KEY }}
          model: ${{ matrix.model.id }}
          task: "Read the issue description, understand the problem, implement a fix, and create a pull request with the solution."
        continue-on-error: true
